
@inherits Panel

<root class=@(Input.Down(InputButton.Score) ? "open" : "closed")>
    <div class="header">
        <label class="title">JUMPER</label>
        <label class="stats">@(JumperGame.Current.IsEditorMode ? "EDITOR MODE PROGRESS NOT SAVED" : "STATS")</label>
    </div>
    <div class="rows">
        <div class="row">
            <label class="title">NAME</label>
            <label class="stat">@Local.Client?.Name</label>
        </div>
        <div class="row">
            <label class="title">PLAYTIME</label>
            <label class="stat">@YourSessionTime</label>
        </div>
        <div class="row">
            <label class="title">JUMPS</label>
            <label class="stat">@Jumps</label>
        </div>
        <div class="row">
            <label class="title">MAX HEIGHT</label>
            <label class="stat">@MaxHeight</label>
        </div>
        <div class="row">
            <label class="title">FALLS</label>
            <label class="stat">@Falls</label>
        </div>
        <div class="row">
            <label class="title">COMPLETIONS</label>
            <label class="stat">@Completions</label>
        </div>
    </div>
</root>

@code {
    private int? Jumps => (Local.Pawn as JumperPawn)?.TotalJumps;
    private int? Falls => (Local.Pawn as JumperPawn)?.TotalFalls;
    private int? Completions => (Local.Pawn as JumperPawn)?.Completions;
    private float? MaxHeight => (Local.Pawn as JumperPawn)?.MaxHeight;

    private string YourSessionTime;
	
    public override void Tick()
    {
        base.Tick();

        YourSessionTime = TimeSpan.FromSeconds((Progress.Current.TimePlayed * 60).Clamp(0, float.MaxValue)).ToString(@"dd\:hh\:mm\:ss");
    }

    protected override int BuildHash()
    {
        return HashCode.Combine(Input.Down(InputButton.Score), Jumps, Falls, MaxHeight, YourSessionTime, Completions, JumperGame.Current.IsEditorMode);
    }
}

